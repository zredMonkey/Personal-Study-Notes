# 一、Docker
## 1.介绍
Docker 是一个开源的平台，用于开发、部署和运行应用程序。它通过使用容器化技术，将应用程序及其依赖性打包在一个独立的、可移植的容器中，从而实现了应用程序在不同环境中的一致性运行。Docker 的主要目标是简化应用程序的部署、扩展和管理，并提供更高的效率和可移植性。

以下是 Docker 的一些关键概念和特点：

1. **容器化：** Docker 使用容器技术来封装应用程序及其依赖性，包括操作系统、库、运行时环境等。这使得应用程序能够在任何支持 Docker 的环境中运行，无论是开发人员的本地机器、测试环境还是生产服务器。

2. **镜像（Image）：** 镜像是一个只读的、可执行的文件，包含了运行应用程序所需的一切内容，包括代码、运行时、库、环境变量等。镜像可以通过 Docker 镜像仓库进行分享和分发。

3. **容器（Container）：** 容器是从镜像创建的可运行实例，它隔离了应用程序及其依赖性，使其能够在隔离的环境中运行。每个容器都是相对独立的，具有自己的文件系统、网络和进程空间。

4. **跨平台：** Docker 镜像和容器可以在不同的操作系统上运行，包括 Linux、Windows 和 macOS 等。

5. **快速部署：** Docker 可以实现快速部署应用程序，无需复杂的配置和依赖性安装，只需在目标环境中运行相应的容器。

6. **可扩展性：** Docker 支持通过容器的方式进行水平扩展，从而实现更好的性能和负载均衡。

7. **版本控制：** 通过 Dockerfile，可以将应用程序的构建过程和依赖性描述为代码，实现了版本控制和重复性构建。

8. **开放性和社区支持：** Docker 是一个开源项目，拥有庞大的社区支持，提供了丰富的文档、示例和插件，使得它易于学习和使用。

Docker 已经在各种场景中得到广泛应用，包括：

- 应用程序开发和测试：开发人员可以在本地环境中构建和测试容器，确保应用程序在不同环境中一致运行。
- 微服务架构：Docker 支持将不同的微服务封装为独立的容器，实现了应用程序的模块化和隔离。
- 持续集成和持续部署（CI/CD）：Docker 可以与 CI/CD 流程集成，实现自动化构建、测试和部署。
- 云原生应用：Docker 是构建云原生应用的重要工具，支持容器编排和管理工具，如 Kubernetes。

总之，Docker 提供了一种便捷、高效、可移植的方式来管理和运行应用程序，为开发人员和运维人员带来了许多好处。

## 2.docker为什么出现？
一款产品从开发到上线，从操作系统到运行环境，再到应用配置。作为开发和运维之间的协作我们需要关心很多东西，这也是很多互联网公司不得不面对的问题，特别是在各种版本迭代之后，不同版本环境的兼容，对运维人员都是考验。

Docker如此发展迅速，也是因为给出了一个标准化的解决方案。

环境配置如此麻烦，换一台机器，就要重来一次，费时费力。很多人想到，能不能从根本上解决问题？软件可以带环境安装?也就是说，安装的时候，把原始环境一摸一样地复制过来。开发人员利用Docker可以消除协作编码时“在我的机器上可正常工作”的问题。

![image](87AF42593D694706A34B0E9DF733BF1C)

Docker镜像的设计，使得Docker得以打破过去【程序即应用】的观念，透过镜像(images)将作业系统核心除外，运作应用程序所需要的系统环境，由下而上打包，达到应用程序跨平台间的无缝衔接运作。

解决了运行环境和配置问题软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。

## 3.Docker能干什么？
### 3.1 之前的虚拟化技术
虚拟机(virtual machine)就是带环境安装的一种解决方案。

缺点：资源占用多、冗余步骤多、启动慢

### 3.2 容器虚拟化技术
Linux发展出了另一种虚拟化技术：Linux容器(Linux Containers,缩写：LXC)

Linux容器不是模拟一个完整的操作系统，而是对进程进行隔离。有了容器，就可以将软件运行所需的所有资源打包到一个隔离的容器中。容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的库资源和设置。系统因此而变得高效轻量并保证部署在任何环境中的软件都能始终如一地运行。

比较了Docker与传统虚拟机的不同：
- 传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整的操作系统，在该系统上再运行所需应用进程。
- 而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。
- 每个容器之间相互隔离，每个容器都有自己的文件系统，容器之间进程不会相互影响，能区分计算资源。

### 3.3 开发/运维(DevOps)
一次构建、随处运行。

### 3.4 企业级


## 4. Docker安装
### 4.1 Docker的基本组成
**Docker结构图：**
![image](4642A88EA33D4650ABAB7C3B64CEFF6F)

### 4.2 Docker三大要素
#### 4.2.1 镜像(image)
就是一个只读的模板。镜像可以用来创建Docker容器，一个镜像可以创建很多容器。
(就好比，镜像是类，容器就是对象)


#### 4.2.2 容器(container)
Docker利用容器(Container)独立运行的一个或一组应用。容器是用镜像创建的运行实例。

它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。

可以把容器看作是一个简易版的Linux环境(包括root用户权限、进程空间、用户空间和网络空间等)和运行在其中的应用程序。

#### 4.2.3 仓库(repository)
仓库(repository)是集中存放镜像文件的场所。

仓库(repository)和仓库注册服务器(registry)是有区别的。仓库注册服务器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签(tag)。

仓库分为公开仓库和私有仓库两种形式。
最大的公开仓库是Docker Hub。

#### 4.2.4 小总结
Docker本身是一个容器运行载体或称之为管理引擎。我们把应用程序和配置依赖打包好形成一个可交付的运行环境，这个打包好的运行环境就是image镜像文件。只有通过这个镜像文件才能生成Docker容器。image文件可以看作是容器的模板。Docker根据image文件生成容器的实例。同一个image文件，可以生成多个同时运行的容器实例。

- image文件生成的容器实例，本身也是一个文件，称为镜像文件。
- 一个容器运行一种服务，当我们需要的时候，就可以通过docker客户端创建一个对应的运行实例，也就是我们的容器。
- 至于仓储，就是放了一堆镜像的地方，我们可以把镜像发布到仓储中，需要的时候从仓储中拉下来就可以了。

![image](7D755D7BFF62439585CC52155A770E89)

###  4.3 Docker安装
暂时略

## 5.Docker常用命令
### 5.1 帮助命令
```
docker version

// docker信息描述
docker info

docker --help
```

### 5.2 镜像命令
```
// 列出本地主机镜像
// --options -a：列出本地所有镜像
//           -q：只显示镜像id
//           --digests: 显示镜像的摘要信息
//           --no-trunc:显示完整的镜像信息
docker images

// 
docker search 某个XXX镜像名字

// 
docker pull 某个XXX镜像名字

// 删除某个镜像
docker rmi 某个XXX镜像名字
// 删除单个
docker rmi -f 镜像id
// 删除多个
docker rmi -f 镜像名1：TAG 镜像名2：TAG
// 删除全部
docker rmi -f $(docker images -qa)

```

### 5.3 容器命令
**根本前提：有镜像才能创建容器**


```
// 新建并启动容器
docker run [OPTIONS] IMAGE [COMMAND][ARG...]
```


```
// 列出当前所有正在运行的容器
docker ps [OPTIONS]
```


// 退出容器

// 启动容器

// 重启容器

// 停止容器

// 强制停止容器

// 删除已停止容器




### 5.4 小总结
